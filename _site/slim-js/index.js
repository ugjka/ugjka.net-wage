var $=Object.defineProperty;var De=(e,t,o)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var Oe=e=>$(e,"__esModule",{value:!0});var Se=(e,t)=>{Oe(e);for(var o in t)$(e,o,{get:t[o],enumerable:!0})};var q=(e,t,o)=>(De(e,typeof t!="symbol"?t+"":t,o),o);var pe={};Se(pe,{NOOP:()=>R,createFunction:()=>M,dashToCamel:()=>Ae,findCtx:()=>H,forceUpdate:()=>je,isForcedUpdate:()=>Q,lazyQueue:()=>Y,markFlush:()=>X,memoize:()=>D,normalize:()=>J,requestIdleCallback:()=>k});var p=Symbol,a=p("block"),E=p("repeat"),k=window.requestIdleCallback||((e,...t)=>setTimeout(e)),N=p("internals"),v=p(),A=p(),y=p(),F=p(),U=p(),le=p();var _=new WeakSet,de=new WeakMap;function je(e,...t){let o=[...arguments].slice(1),n=de.get(e);if(!n)return console.error("Flush error");_.add(e),o.length?n(...o):n(),requestAnimationFrame(()=>_.delete(e))}var H=e=>{for(;e&&!e[E];)e=e.parentElement;return e?.[E]},Q=e=>_.has(e),X=(e,t)=>de.set(e,t),ve=/-[a-z]/g,Ae=e=>e.indexOf("-")<0?e:e.replace(ve,t=>t[1].toUpperCase()),ye={timeRemaining:()=>!0},Y=(e,t=20,o=R)=>{let n={timeout:t},i=e[Symbol.iterator](),r=i.next(),l=()=>k(d,n),d=(s=ye)=>{for(;s.timeRemaining()&&!r.done;)r.value(),r=i.next();s?.didTimeout&&!r.done&&(r.value(),r=i.next()),r.done?o():l()};l()},J=e=>e.replace(/\n/g,"").replace(/[\t ]+\</g,"<").replace(/\>[\t ]+\</g,"><").replace(/\>[\t ]+$/g,">"),D=e=>{let t={};return o=>t[o]||(t[o]=e(o))},me={},M=(...e)=>{let t=e.join("$");return me[t]||(me[t]=new Function(...e))},R=()=>{};var Fe=Symbol(),Me=/(\{\{([^\{|^\}]+)\}\})/gi,ue=/(this\.[\w+|\d*]*)+/gi,fe=/item(\.[\w+|\d*]*)*/gi,Pe=(e="")=>{let t=[],o=null;for(ue.lastIndex=fe.lastIndex=0;o=ue.exec(e);)t.push(o[1].split(".")[1]);return fe.test(e)&&t.push(Fe),{paths:t,expressions:t.length?e.match(Me)||[]:[]}},G=D(Pe);var O=Symbol(),K=class{constructor(){this[O]=[]}add(t,o=!1){o?this[O].unshift(t):this[O].push(t)}getAll(){return[...this[O]]}},he=class extends K{exec(t,o){this[O].forEach(n=>n(t,o))}},Z=new K,C=new he;var xe=[],Ee={},ee="abort",P=console,ge=(e,t,...o)=>u[U]&&(P.group(e),P.error(t),P.info(...o),P.groupEnd()),Ie=D(e=>"`"+e.replaceAll("{{","${").replaceAll("}}","}")+"`"),ze=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,be=e=>document.createTreeWalker(e,ze),I=(e,t)=>typeof e===t,S=new WeakMap,Be=e=>I(e,"function")?e():e,te=(e,t,o,n)=>{let i=S.get(e)||S.set(e,{}).get(e);if(!i[o]){let l=(Object.getOwnPropertyDescriptor(e,o)||Ee).set,d=e[o];Object.defineProperty(e,o,{get:()=>d,set:s=>{(s!==d||I(s,"object"))&&(d=s,l&&l(s),oe(e,o,d))}})}(i[o]=i[o]||new Set).add(t);let r=t[N]=t[N]||{};return I(o,"symbol")?R:((r[o]=r[o]||new Set).add(n),()=>{r[o].delete(n)})},Ne=(e,t,o)=>{(e[t]||xe).forEach(n=>{let i=n[E]||o;n[N][t].forEach(r=>r(i))})},oe=(e,t,o)=>{let n=S.get(e)||S.set(e,{}).get(e);t!=="*"?Ne(n,t,o):Object.keys(n).forEach(i=>Ne(n,i,e[i]))},Re=(e,t,o="*")=>{let n=S.get(e)||Ee;if(o==="*"){Object.keys(n).forEach(r=>Re(e,t,r));return}let i=n[o];if(i){let r=be(t),l=r.currentNode;for(;l;)i.delete(l),l=r.nextNode()}},ne=(e,t)=>{let o=new Set,n=new Set,i=new Set,r=new Set,l=Z.getAll(),d=be(t),s=d.currentNode||d.nextNode();for(;s;s=d.nextNode()){let m=s;s.nodeType,s.nodeValue,s.addEventListener;let w=s.nodeName,z=()=>H(m);if(s.nodeType===Node.ELEMENT_NODE){let c=s;if(w.includes("-")&&I(c[a],"undefined")&&(c[a]=!0,requestAnimationFrame(()=>c[a]=!1)),c[a]===ee)continue;let T=Array.from(c.attributes),g=0,B=T.length;e:for(g;g<B;g++){let f=T[g],b=f.nodeName,h=f.nodeValue||"";if(s[a]===ee)break e;let x=h.trim(),j=x.slice(0,2)==="{{"&&x.slice(-2)==="}}"?x.slice(2,-2):x,re=~x.indexOf("{{")?G(j).paths:xe;t:for(let L of l){if(s[a]===ee)break t;if(L.attribute(f,b,h)){let{update:ie,removeAttribute:Te,removeNode:ke}=L.process({attribute:f,attributeName:b,attributeValue:h,context:z,expression:j,props:re,scopeNode:e,targetNode:c,targetNodeName:w});if(Te&&i.add(f),ke&&r.add(c),ie){let ce=L.noExecution?R:M("item",`return ${j}`),ae=(W=z())=>{try{let V=ce===R?void 0:ce.call(e,Be(W));ie(V,Q(e))}catch(V){ge(`Directive Error ${b}`,V.message,`Expression: ${j}`,"Node",c)}};n.add(ae),re.forEach(W=>{o.add(te(e,s,W,ae))})}}}}}else if(s.nodeType===Node.TEXT_NODE){let c=s.textContent;if(!~c.indexOf("{{"))continue;let T=s,{paths:g}=G(c),B=Ie(c),f=M("item",`return ${B}`),b=(h=z())=>{try{T.nodeValue=f.call(e,h)}catch(x){ge(`Expression error: ${c}`,x.message,"Node",T.parentElement)}};n.add(b),g.forEach(h=>o.add(te(e,s,h,b)))}}return r.forEach(m=>m.remove()),u[U]||i.forEach(m=>{try{m.ownerElement.removeAttribute(m.nodeName)}catch(w){}}),{flush:(...m)=>{m.length?m.forEach(w=>oe(e,w)):oe(e,"*")},clear:()=>Y(o),bounds:n}};var Ce=Symbol,se=Ce(),we=Ce(),u=class extends HTMLElement{static element(t,o,n=class extends Slim{}){n.template=o,customElements.define(t,n)}constructor(){super();this[se]()}onBeforeCreated(){}onCreated(){}onAdded(){}onRemoved(){}onRender(){}connectedCallback(){this.onAdded(),C.exec(y,this)}disconnectedCallback(){this.onRemoved(),C.exec(F,this)}[se](){if(this[a]!=="abort"){if(this[a])return requestAnimationFrame(()=>this[se]());this.onBeforeCreated(),this.constructor.useShadow&&!this.shadowRoot&&this.attachShadow({mode:"open"}),C.exec(v,this),this[we]()}}[we](){let t=J(this.constructor.template);if(t){let o=document.createElement("template");o.innerHTML=t,Promise.resolve().then(()=>{let{flush:n}=ne(this,o.content);X(this,n),n(),this.onCreated(),C.exec(A,this),(this.shadowRoot||this).appendChild(o.content),this.onRender()})}}};q(u,"template",""),q(u,"useShadow",!0);var st={ADDED:y,CREATE:v,RENDER:A,REMOVED:F},rt={repeatCtx:E,internals:N,block:a,index:le,requestIdleCallback:k};Window.prototype.Slim=u;export{u as Component,Z as DirectiveRegistry,rt as Internals,st as Phase,C as PluginRegistry,u as Slim,pe as Utils,te as createBind,ne as processDOM,Re as removeBindings};
//# sourceMappingURL=index.js.map
