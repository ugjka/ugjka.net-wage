var W=Object.defineProperty;var Oe=(e,t,o)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var Ne=e=>W(e,"__esModule",{value:!0});var Re=(e,t)=>{Ne(e);for(var o in t)W(e,o,{get:t[o],enumerable:!0})};var B=(e,t,o)=>(Oe(e,typeof t!="symbol"?t+"":t,o),o);var k={};Re(k,{NOOP:()=>N,createFunction:()=>v,dashToCamel:()=>Se,findCtx:()=>Q,forceUpdate:()=>Ae,isForcedUpdate:()=>X,lazyQueue:()=>J,markFlush:()=>Y,memoize:()=>A,normalize:()=>Z,requestIdleCallback:()=>D});var p=Symbol,d=p("block"),O=p("repeat"),D=window.requestIdleCallback||((e,...t)=>setTimeout(e)),j=p("internals"),$=p(),U=p(),q=p(),V=p(),_=p(),je=p();var H=new WeakSet,de=new WeakMap;function Ae(e,...t){let o=[...arguments].slice(1),n=de.get(e);if(!n)return console.error("Flush error");H.add(e),o.length?n(...o):n(),requestAnimationFrame(()=>H.delete(e))}var Q=e=>{for(;e&&!e[O];)e=e.parentElement;return e?.[O]},X=e=>H.has(e),Y=(e,t)=>de.set(e,t),Te=/-[a-z]/g,Se=e=>e.indexOf("-")<0?e:e.replace(Te,t=>t[1].toUpperCase()),De={timeRemaining:()=>!0},J=(e,t=20,o=N)=>{let n={timeout:t},c=e[Symbol.iterator](),s=c.next(),f=()=>D(a,n),a=(r=De)=>{for(;r.timeRemaining()&&!s.done;)s.value(),s=c.next();r?.didTimeout&&!s.done&&(s.value(),s=c.next()),s.done?o():f()};f()},Z=e=>e.replace(/\n/g,"").replace(/[\t ]+\</g,"<").replace(/\>[\t ]+\</g,"><").replace(/\>[\t ]+$/g,">"),A=e=>{let t={};return o=>t[o]||(t[o]=e(o))},ue={},v=(...e)=>{let t=e.join("$");return ue[t]||(ue[t]=new Function(...e))},N=()=>{};var ve=Symbol(),ke=/(\{\{([^\{|^\}]+)\}\})/gi,fe=/(this\.[\w+|\d*]*)+/gi,pe=/item(\.[\w+|\d*]*)*/gi,ye=(e="")=>{let t=[],o=null;for(fe.lastIndex=pe.lastIndex=0;o=fe.exec(e);)t.push(o[1].split(".")[1]);return pe.test(e)&&t.push(ve),{paths:t,expressions:t.length?e.match(ke)||[]:[]}},G=A(ye);var T=Symbol(),K=class{constructor(){this[T]=[]}add(t,o=!1){o?this[T].unshift(t):this[T].push(t)}getAll(){return[...this[T]]}},me=class extends K{exec(t,o){this[T].forEach(n=>n(t,o))}},ee=new K,R=new me;var he=[],Pe={},te="abort",y=console,xe=(e,t,...o)=>m[_]&&(y.group(e),y.error(t),y.info(...o),y.groupEnd()),Me=A(e=>"`"+e.replaceAll("{{","${").replaceAll("}}","}")+"`"),Fe=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,ze=e=>document.createTreeWalker(e,Fe),P=(e,t)=>typeof e===t,M=new WeakMap,Ie=e=>P(e,"function")?e():e,oe=(e,t,o,n)=>{let c=M.get(e)||M.set(e,{}).get(e);if(!c[o]){let f=(Object.getOwnPropertyDescriptor(e,o)||Pe).set,a=e[o];Object.defineProperty(e,o,{get:()=>a,set:r=>{(r!==a||P(r,"object"))&&(a=r,f&&f(r),ne(e,o,a))}})}(c[o]=c[o]||new Set).add(t);let s=t[j]=t[j]||{};return P(o,"symbol")?N:((s[o]=s[o]||new Set).add(n),()=>{s[o].delete(n)})},be=(e,t,o)=>{(e[t]||he).forEach(n=>{let c=n[O]||o;n[j][t].forEach(s=>s(c))})},ne=(e,t,o)=>{let n=M.get(e)||M.set(e,{}).get(e);t!=="*"?be(n,t,o):Object.keys(n).forEach(c=>be(n,c,e[c]))};var re=(e,t)=>{let o=new Set,n=new Set,c=new Set,s=new Set,f=ee.getAll(),a=ze(t),r=a.currentNode||a.nextNode();for(;r;r=a.nextNode()){let l=r;r.nodeType,r.nodeValue,r.addEventListener;let h=r.nodeName,u=()=>Q(l);if(r.nodeType===Node.ELEMENT_NODE){let i=r;if(h.includes("-")&&P(i[d],"undefined")&&(i[d]=!0,requestAnimationFrame(()=>i[d]=!1)),i[d]===te)continue;let x=Array.from(i.attributes),w=0,F=x.length;e:for(w;w<F;w++){let b=x[w],C=b.nodeName,E=b.nodeValue||"";if(r[d]===te)break e;let g=E.trim(),S=g.slice(0,2)==="{{"&&g.slice(-2)==="}}"?g.slice(2,-2):g,ie=~g.indexOf("{{")?G(S).paths:he;t:for(let z of f){if(r[d]===te)break t;if(z.attribute(b,C,E)){let{update:ce,removeAttribute:we,removeNode:Ce}=z.process({attribute:b,attributeName:C,attributeValue:E,context:u,expression:S,props:ie,scopeNode:e,targetNode:i,targetNodeName:h});if(we&&c.add(b),Ce&&s.add(i),ce){let ae=z.noExecution?N:v("item",`return ${S}`),le=(I=u())=>{try{let L=ae===N?void 0:ae.call(e,Ie(I));ce(L,X(e))}catch(L){xe(`Directive Error ${C}`,L.message,`Expression: ${S}`,"Node",i)}};n.add(le),ie.forEach(I=>{o.add(oe(e,r,I,le))})}}}}}else if(r.nodeType===Node.TEXT_NODE){let i=r.textContent;if(!~i.indexOf("{{"))continue;let x=r,{paths:w}=G(i),F=Me(i),b=v("item",`return ${F}`),C=(E=u())=>{try{x.nodeValue=b.call(e,E)}catch(g){xe(`Expression error: ${i}`,g.message,"Node",x.parentElement)}};n.add(C),w.forEach(E=>o.add(oe(e,r,E,C)))}}return s.forEach(l=>l.remove()),m[_]||c.forEach(l=>{try{l.ownerElement.removeAttribute(l.nodeName)}catch(h){}}),{flush:(...l)=>{l.length?l.forEach(h=>ne(e,h)):ne(e,"*")},clear:()=>J(o),bounds:n}};var Ee=Symbol,se=Ee(),ge=Ee(),m=class extends HTMLElement{static element(t,o,n=class extends Slim{}){n.template=o,customElements.define(t,n)}constructor(){super();this[se]()}onBeforeCreated(){}onCreated(){}onAdded(){}onRemoved(){}onRender(){}connectedCallback(){this.onAdded(),R.exec(q,this)}disconnectedCallback(){this.onRemoved(),R.exec(V,this)}[se](){if(this[d]!=="abort"){if(this[d])return requestAnimationFrame(()=>this[se]());this.onBeforeCreated(),this.constructor.useShadow&&!this.shadowRoot&&this.attachShadow({mode:"open"}),R.exec($,this),this[ge]()}}[ge](){let t=Z(this.constructor.template);if(t){let o=document.createElement("template");o.innerHTML=t,Promise.resolve().then(()=>{let{flush:n}=re(this,o.content);Y(this,n),n(),this.onCreated(),R.exec(U,this),(this.shadowRoot||this).appendChild(o.content),this.onRender()})}}};B(m,"template",""),B(m,"useShadow",!0);Window.prototype.Slim=m;var Le=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase();function ut(e){return function(t){Object.defineProperty(t,"useShadow",{value:e})}}function ft(e){return function(t){Object.defineProperty(t,"template",{value:e})}}function pt(e){return function(t){customElements.define(e,t)}}var We=new WeakMap;function Be(e,t){let o=k.dashToCamel(e);this[o]=t}function mt(e=""){return function(t,o,n){let c=t.constructor,s=e||Le(String(o)),{observedAttributes:f=[]}=c;Object.defineProperty(c,"observedAttributes",{value:[...f,s],configurable:!0,writable:!0});let a=We.get(t);a&&(a.attrs=a.attrs||[]).push(s);let r=t.attributeChangedCallback;Object.defineProperty(t,"attributeChangedCallback",{value:function(u,i,x){r&&r.call(this,u,i,x),~a.attrs.indexOf(u)&&Be.call(this,u,x)},configurable:!0});let l,h={configurable:!0,writable:!0,initializer:function(){let u=(Object.getOwnPropertyDescriptor(this,o)||Object.getOwnPropertyDescriptor(t,o)||{}).set;Object.defineProperty(this,o,{get:function(){return l},configurable:!0,set:function(i){l=i,u&&u(i),typeof i=="boolean"?i?this.setAttribute(s,""):this.removeAttribute(s):i===null?this.removeAttribute(s):this.setAttribute(s,String(i))}}),this[o]=this[o]}};return Object.defineProperty(t,o,h),n.configurable=!0,n.writable=!0,h}}export{mt as attribute,pt as tag,ft as template,ut as useShadow};
